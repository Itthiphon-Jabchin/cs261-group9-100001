<!DOCTYPE html>
<html lang="th" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head><meta charset="UTF-8"><title>Campus Jobs</title></head>
<body>
  <div>
    <span sec:authorize="isAuthenticated()">
      เข้าสู่ระบบโดย: <b sec:authentication="principal.displayNameTh">user</b> |
      <form method="post" th:action="@{/logout}" style="display:inline">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <button type="submit">ออกจากระบบ</button>
      </form>
    </span>
    <span sec:authorize="isAnonymous()">
      <a href="/login">เข้าสู่ระบบ</a>
    </span>
    <span sec:authorize="hasAuthority('ROLE_TEACHER')"> | <a href="/teacher/jobs">พื้นที่อาจารย์</a></span>
    <span sec:authorize="hasAuthority('ROLE_STUDENT')"> | <a href="/student/applications">ใบสมัครของฉัน</a></span>
  </div>

  <h2>ฟีดงานทั้งหมด</h2>
  <div th:if="${jobs != null and !jobs.isEmpty()}">
    <div th:each="job : ${jobs}" style="border:1px solid #ddd;padding:10px;margin:8px 0;">
      <h3 th:text="${job.title}">ชื่องาน</h3>
      <p th:text="${job.description}">รายละเอียดงาน</p>
      <a th:href="@{|/jobs/${job.id}|}">ดูรายละเอียด</a>
    </div>
  </div>
  <div th:if="${jobs == null or jobs.isEmpty()}">
    <p>ตอนนี้ยังไม่มีงานประกาศ</p>
  </div>
</body></html>
